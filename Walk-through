üßü MERCURY: THE FULL HEADLESS ZOMBIE EDITION (v1.2)
"The Beheading was Purposeful. The Smartphone is the Crown."
This guide is for anyone, regardless of Linux experience. Follow these steps exactly to transform your PC into a monitor-free media server controlled entirely by your phone.
STEP 1: PREPARE THE INSTALLER
Before the "Beheading" happens, we have to create a script file on your server.
 * Open your Terminal.
 * Type this command and press Enter:
   nano install-headless.sh
   (This opens a blank blue text editor. You use this to "build" your installer).
 * Copy the code block below and paste it into that terminal window.
 * Save and Exit: Press Ctrl + O (to save), then press Enter, then press Ctrl + X (to exit).
-- COPY THIS BLOCK --
#!/bin/bash
echo "üöÄ Starting the Purposeful Beheading..."

# 1. System Foundation & Drivers
# This updates your computer and installs the GTX 750 drivers automatically.
sudo apt update && sudo apt upgrade -y
sudo ubuntu-drivers autoinstall

# 2. NVIDIA Persistence & Toolkit (GPU Fix)
# This keeps your graphics card "awake" so it can work without a monitor.
sudo nvidia-smi -pm 1
curl -fsSL https://nvidia.github.io/libnvidia-container/gpgkey | sudo gpg --dearmor -o /usr/share/keyrings/nvidia-container-toolkit-keyring.gpg
curl -s -L https://nvidia.github.io/libnvidia-container/stable/deb/nvidia-container-toolkit.list | sed 's#deb https://#deb [signed-by=/usr/share/keyrings/nvidia-container-toolkit-keyring.gpg] https://#g' | sudo tee /etc/apt/sources.list.d/nvidia-container-toolkit.list
sudo apt update && sudo apt-get install -y nvidia-container-toolkit
sudo nvidia-ctk runtime configure --runtime=docker

# 3. Docker Engine Setup
# This installs the "engine" that runs your media apps (Jellyfin, Sonarr, etc).
sudo apt-get install -y ca-certificates curl gnupg
sudo install -m 0755 -d /etc/apt/keyrings
curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /etc/apt/keyrings/docker.gpg
sudo chmod a+r /etc/apt/keyrings/docker.gpg
echo "deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/ubuntu $(. /etc/os-release && echo "$VERSION_CODENAME") stable" | sudo tee /etc/apt/sources.list.d/docker.list > /dev/null
sudo apt update && sudo apt-get install -y docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin
sudo usermod -aG docker $USER
sudo systemctl restart docker

# 4. Mercury Environment Setup
# This creates the folders where your settings and movies will live.
mkdir -p ~/mercury/config/{jellyfin,jellyseerr,sonarr,radarr,prowlarr,qbittorrent,flaresolverr,tailscale,portainer}
sudo mkdir -p /media/linux/Expansion

# 5. Inject Master 'm' Command (With GUI Toggle)
# This creates short commands so you can control the server easily from your phone.
cat << 'EOF' >> ~/.bash_aliases
alias gpu='watch -n 1 nvidia-smi'
alias mercury='cd ~/mercury'
m() {
case $1 in
gpu)     gpu ;;
up)      cd ~/mercury && docker compose up -d ;;
ps)      docker ps --format "table {{.Names}}\t{{.Status}}\t{{.Ports}}" ;;
reset)   cd ~/mercury && docker compose down && docker system prune -f && docker compose up -d ;;
mount)   sudo mount -a && echo "üßü Vault Refreshed." ;;
status)  ~/mercury/status.sh ;;
gui-on)  sudo systemctl set-default graphical.target && echo "‚úÖ GUI Restored. Reboot to see desktop." ;;
gui-off) sudo systemctl set-default multi-user.target && echo "üßü Beheaded. Reboot for Headless mode." ;;
*)       echo "Usage: m [gpu|up|ps|reset|mount|status|gui-on|gui-off]" ;;
esac
}
EOF

# 6. THE PURPOSEFUL BEHEADING
# This tells the PC to stop showing a desktop and save all RAM for your movies.
sudo systemctl set-default multi-user.target
echo "üßü The Zombie is now Headless. Rebooting in 5 seconds..."
sleep 5
sudo reboot

STEP 2: ACTIVATE THE INSTALLER
Now you must tell the computer that the file you just made is a program it is allowed to run.
 * Type this command and press Enter:
   chmod +x install-headless.sh
 * Start the installation:
   ./install-headless.sh
 * What happens: Your screen will scroll with code for a few minutes. When it finishes, your PC will automatically reboot. Your monitor will go black or show a login text‚Äîthis is normal. The Beheading is complete.
STEP 3: THE INTERNAL DRIVE TRICK (mount-vault.sh)
Immediately after the reboot, we must "lock" your external Expansion drive into the system so it never disconnects.
 * Type: nano mount-vault.sh.
 * Paste the code below into the window and save (Ctrl+O, Enter, Ctrl+X).
 * Make it run: chmod +x mount-vault.sh.
 * Run it: ./mount-vault.sh.
 * Follow the prompt: It will show you a list of drives. Look for your Expansion drive and copy the long code (UUID) next to it. Paste that code when the script asks for it.
-- COPY THIS BLOCK --
#!/bin/bash
echo "üîç Searching for External Drive UUID..."
lsblk -f
echo "‚ö†Ô∏è Copy the UUID for your Expansion drive from the list above."
read -p "Enter the UUID: " UUID
sudo cp /etc/fstab /etc/fstab.bak
echo "UUID=$UUID /media/linux/Expansion auto nosuid,nodev,nofail,x-gvfs-show 0 0" | sudo tee -a /etc/fstab
sudo mount -a
echo "‚úÖ Expansion Drive integrated as internal storage."

STEP 4: WAKING THE ZOMBIE
Now that the brain is ready and the vault is locked, wake up your media empire:
Type: m up
STEP 5: THE DIGITAL NERVE CENTER (Web UI)
Your server is now headless. Open your smartphone browser and type in your server's IP address followed by these ports to finish setup:
 * Portainer (9443): Your mobile command center to check if apps are alive.
 * Prowlarr (9696): Add your movie sites here; they sync to Radarr/Sonarr automatically.
 * Jellyseerr (5055): The one-tap request hub for your phone.
‚ÄãSTEP 6: THE DIGITAL NERVE CENTER (Web UI)
‚ÄãAccess these ports via your smartphone browser using your server's IP:
‚ÄãPortainer (9443): Your visual command center.
‚ÄãProwlarr (9696): Add indexers and sync them to Sonarr/Radarr.
‚ÄãJellyseerr (5055): Connect everything via API keys.


