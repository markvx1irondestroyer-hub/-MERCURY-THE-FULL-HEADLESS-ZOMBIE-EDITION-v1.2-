â€‹ğŸ§Ÿ MERCURY: THE FULL HEADLESS ZOMBIE EDITION (v1.2)
â€‹"The Beheading was Purposeful. The Smartphone is the Crown."
â€‹This is a comprehensive manual for transforming your PC into a monitor-free media server. Follow these instructions in the exact order listed to ensure the "Zombie" wakes up correctly.
â€‹STEP 1: PREPARE THE INSTALLER
â€‹Before running the "Beheading" script, you must create the file on your server.
â€‹Open your Terminal.
â€‹Type this command and press Enter:
nano install-headless.sh
(This opens a blank editor window).
â€‹Copy the entire block below and paste it into that window.
â€‹Save and Exit: Press Ctrl + O, then Enter, then Ctrl + X.
â€‹-- COPY THIS SECTION --
#!/bin/bash
echo "ğŸš€ Starting the Purposeful Beheading..."
â€‹1. System Foundation & Drivers
â€‹sudo apt update && sudo apt upgrade -y
sudo ubuntu-drivers autoinstall
â€‹2. NVIDIA Persistence & Toolkit (GPU Fix)
â€‹sudo nvidia-smi -pm 1
curl -fsSL https://nvidia.github.io/libnvidia-container/gpgkey | sudo gpg --dearmor -o /usr/share/keyrings/nvidia-container-toolkit-keyring.gpg
curl -s -L https://nvidia.github.io/libnvidia-container/stable/deb/nvidia-container-toolkit.list | sed 's#deb https://#deb [signed-by=/usr/share/keyrings/nvidia-container-toolkit-keyring.gpg] https://#g' | sudo tee /etc/apt/sources.list.d/nvidia-container-toolkit.list
sudo apt update && sudo apt-get install -y nvidia-container-toolkit
sudo nvidia-ctk runtime configure --runtime=docker
â€‹3. Docker Engine Setup
â€‹sudo apt-get install -y ca-certificates curl gnupg
sudo install -m 0755 -d /etc/apt/keyrings
curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /etc/apt/keyrings/docker.gpg
sudo chmod a+r /etc/apt/keyrings/docker.gpg
echo "deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/ubuntu $(. /etc/os-release && echo "$VERSION_CODENAME") stable" | sudo tee /etc/apt/sources.list.d/docker.list > /dev/null
sudo apt update && sudo apt-get install -y docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin
sudo usermod -aG docker $USER
sudo systemctl restart docker
â€‹4. Mercury Environment Setup
â€‹mkdir -p ~/mercury/config/{jellyfin,jellyseerr,sonarr,radarr,prowlarr,qbittorrent,flaresolverr,tailscale,portainer}
sudo mkdir -p /media/linux/Expansion
â€‹5. Inject Master 'm' Command (With GUI Toggle)
â€‹cat << 'EOF' >> ~/.bash_aliases
alias gpu='watch -n 1 nvidia-smi'
alias mercury='cd ~/mercury'
m() {
case $1 in
gpu)     gpu ;;
up)      cd ~/mercury && docker compose up -d ;;
ps)      docker ps --format "table {{.Names}}\t{{.Status}}\t{{.Ports}}" ;;
reset)   cd ~/mercury && docker compose down && docker system prune -f && docker compose up -d ;;
mount)   sudo mount -a && echo "ğŸ§Ÿ Vault Refreshed." ;;
status)  ~/mercury/status.sh ;;
gui-on)  sudo systemctl set-default graphical.target && echo "âœ… GUI Restored. Reboot to see desktop." ;;
gui-off) sudo systemctl set-default multi-user.target && echo "ğŸ§Ÿ Beheaded. Reboot for Headless mode." ;;
*)       echo "Usage: m [gpu|up|ps|reset|mount|status|gui-on|gui-off]" ;;
esac
}
EOF
â€‹6. THE PURPOSEFUL BEHEADING
â€‹sudo systemctl set-default multi-user.target
echo "ğŸ§Ÿ The Zombie is now Headless. Rebooting in 5 seconds..."
sleep 5
sudo reboot
-- END SECTION --
â€‹STEP 2: ACTIVATE THE INSTALLER
â€‹Type this command and press Enter:
chmod +x install-headless.sh.
â€‹Run the script:
./install-headless.sh.
â€‹What happens: Your PC will install the drivers, disable the desktop GUI, and reboot into a headless state.
â€‹STEP 3: THE INTERNAL DRIVE TRICK (mount-vault.sh)
â€‹Immediately after reboot, you must trick Linux into mounting your external "Vault" before the apps wake up.
â€‹Type: nano mount-vault.sh.
â€‹Paste the code below into the window.
â€‹Save and Exit: Press Ctrl + O, then Enter, then Ctrl + X.
â€‹Run it: chmod +x mount-vault.sh && ./mount-vault.sh.
â€‹-- COPY THIS SECTION --
#!/bin/bash
echo "ğŸ” Searching for External Drive UUID..."
lsblk -f
echo "âš ï¸ Copy the UUID for your Expansion drive from the list above."
read -p "Enter the UUID: " UUID
sudo cp /etc/fstab /etc/fstab.bak
echo "UUID=$UUID /media/linux/Expansion auto nosuid,nodev,nofail,x-gvfs-show 0 0" | sudo tee -a /etc/fstab
sudo mount -a
echo "âœ… Expansion Drive integrated as internal storage."
-- END SECTION --
â€‹STEP 4: WAKING THE ZOMBIE
â€‹Start all your apps with one command:
m up.
â€‹STEP 5: THE DIGITAL NERVE CENTER (Web UI)
â€‹Access these ports via your smartphone browser using your server's IP:
â€‹Portainer (9443): Your visual command center.
â€‹Prowlarr (9696): Add indexers and sync them to Sonarr/Radarr.
â€‹Jellyseerr (5055): Connect everything via API keys.


