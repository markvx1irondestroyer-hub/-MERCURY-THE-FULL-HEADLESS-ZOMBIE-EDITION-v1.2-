â€‹ğŸ§Ÿ MERCURY: THE FULL HEADLESS ZOMBIE EDITION (v1.2) ğŸ§Ÿ


"The Beheading was Purposeful. The Smartphone is the Crown."


â€‹This is a complete, end-to-end blueprint for a dedicated, monitor-free media server.


â€‹PHASE 1: THE PURPOSEFUL BEHEADING (install-headless.sh)


â€‹Run this script to install drivers, enable GPU persistence, and disable the desktop GUI.


â€‹#!/bin/bash


echo "ğŸš€ Starting the Purposeful Beheading..."


sudo apt update && sudo apt upgrade -y


sudo ubuntu-drivers autoinstall


sudo nvidia-smi -pm 1


curl -fsSL https://nvidia.github.io/libnvidia-container/gpgkey | sudo gpg --dearmor -o /usr/share/keyrings/nvidia-container-toolkit-keyring.gpg


curl -s -L https://nvidia.github.io/libnvidia-container/stable/deb/nvidia-container-toolkit.list | sed 's#deb https://#deb [signed-by=/usr/share/keyrings/nvidia-container-toolkit-keyring.gpg] https://#g' | sudo tee /etc/apt/sources.list.d/nvidia-container-toolkit.list


sudo apt update && sudo apt-get install -y nvidia-container-toolkit


sudo nvidia-ctk runtime configure --runtime=docker


sudo apt-get install -y ca-certificates curl gnupg


sudo install -m 0755 -d /etc/apt/keyrings


curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /etc/apt/keyrings/docker.gpg


sudo chmod a+r /etc/apt/keyrings/docker.gpg


echo "deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/ubuntu $(. /etc/os-release && echo "$VERSION_CODENAME") stable" | sudo tee /etc/apt/sources.list.d/docker.list > /dev/null


sudo apt update && sudo apt-get install -y docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin


sudo usermod -aG docker $USER


sudo systemctl restart docker


mkdir -p ~/mercury/config/{jellyfin,jellyseerr,sonarr,radarr,prowlarr,qbittorrent,flaresolverr,tailscale,portainer}


sudo mkdir -p /media/linux/Expansion


cat << 'EOF' >> ~/.bash_aliases


alias gpu='watch -n 1 nvidia-smi'


alias mercury='cd ~/mercury'


m() {


case $1 in


gpu)Â Â Â Â  gpu ;;


up)Â Â Â Â Â  cd ~/mercury && docker compose up -d ;;


ps)Â Â Â Â Â  docker ps --format "table {{.Names}}\t{{.Status}}\t{{.Ports}}" ;;


reset)Â Â  cd ~/mercury && docker compose down && docker system prune -f && docker compose up -d ;;


mount)Â Â  sudo mount -a && echo "ğŸ§Ÿ Vault Refreshed." ;;


status)Â  ~/mercury/status.sh ;;


gui-on)Â  sudo systemctl set-default graphical.target && echo "âœ… GUI Restored. Reboot to see desktop." ;;


gui-off) sudo systemctl set-default multi-user.target && echo "ğŸ§Ÿ Beheaded. Reboot for Headless mode." ;;


*)Â Â Â Â Â Â  echo "Usage: m [gpu|up|ps|reset|mount|status|gui-on|gui-off]" ;;


esac


}


EOF


sudo systemctl set-default multi-user.target


echo "ğŸ§Ÿ The Zombie is now Headless. Rebooting in 5 seconds..."


sleep 5


sudo reboot


â€‹PHASE 2: THE INTERNAL DRIVE TRICK (mount-vault.sh)


â€‹Run this immediately after reboot to ensure the "Vault" is ready before the apps wake up.


â€‹#!/bin/bash


echo "ğŸ” Searching for External Drive UUID..."


lsblk -f


echo "âš ï¸ Copy the UUID for your Expansion drive."


read -p "Enter the UUID: " UUID


sudo cp /etc/fstab /etc/fstab.bak


echo "UUID=$UUID /media/linux/Expansion auto nosuid,nodev,nofail,x-gvfs-show 0 0" | sudo tee -a /etc/fstab


sudo mount -a


echo "âœ… Expansion Drive integrated as internal storage."


â€‹PHASE 3: WAKING THE ZOMBIE


â€‹Run the following command to pull and start your applications:


m up


â€‹PHASE 4: THE DIGITAL NERVE CENTER (Web UI Setup)


â€‹Your server is now headless. Access these ports via your smartphone browser using your server's IP:




â€‹Portainer (Port 9443): Your mobile command center. Log in first to ensure all containers show a green "Running" status.


â€‹Jellyfin (Port 8096): Run the startup wizard. When adding libraries, point them to /data/storage (your landing zone) or /data/expansion (your vault).


â€‹qBittorrent (Port 8080): Go to Settings > Web UI and change the default password immediately.


â€‹Prowlarr (Port 9696): Add your indexers here. Use the "Sync" feature to automatically push them to Sonarr and Radarr.


â€‹Radarr (Port 7878) & Sonarr (Port 8989): * Go to Settings > Download Clients.






â€‹Add qBittorrent.


â€‹Crucial: Use the container name "qbittorrent" as the Hostname, not your IP.


â€‹Set your "Root Folders" to /data/expansion to ensure movies are stored in the Vault.






â€‹Jellyseerr (Port 5055): The request hub. Connect it to Jellyfin and your *Arr apps using the API keys found in their respective Settings > General tabs.




â€‹ğŸ“’ HEADLESS COMMAND CHEAT SHEET


â€‹m up: Wake the media empire.


m status: Check storage and GPU health from your phone.


m mount: Force-connect the Vault if itâ€™s missing.


m gui-on: Emergency Desktop restore (requires reboot).


m gui-off: Return to pure Headless performance (requires reboot).


â€‹âš ï¸ THE VAULT WARNING


If you don't run the mount-vault.sh "Internal Trick," your apps will wake up before the USB drive is ready, and Jellyfin will report your library is empty. This script ensures the brain and the memories are always connected.


â€‹sudo apt-get install -y ca-certificates curl gnupg


sudo install -m 0755 -d /etc/apt/keyrings


curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /etc/apt/keyrings/docker.gpg


sudo chmod a+r /etc/apt/keyrings/docker.gpg


echo "deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/ubuntu $(. /etc/os-release && echo "$VERSION_CODENAME") stable" | sudo tee /etc/apt/sources.list.d/docker.list > /dev/null


sudo apt update && sudo apt-get install -y docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin


sudo usermod -aG docker $USER


sudo systemctl restart docker


â€‹4. Mercury Environment Setup


â€‹mkdir -p ~/mercury/config/{jellyfin,jellyseerr,sonarr,radarr,prowlarr,qbittorrent,flaresolverr,tailscale,portainer}


sudo mkdir -p /media/linux/Expansion


â€‹5. Inject Master 'm' Commands (With GUI Toggle)


â€‹cat << 'EOF' >> ~/.bash_aliases


alias gpu='watch -n 1 nvidia-smi'


alias mercury='cd ~/mercury'


m() {


case $1 in


gpu)Â Â Â Â  gpu ;;


up)Â Â Â Â Â  cd ~/mercury && docker compose up -d ;;


ps)Â Â Â Â Â  docker ps --format "table {{.Names}}\t{{.Status}}\t{{.Ports}}" ;;


reset)Â Â  cd ~/mercury && docker compose down && docker system prune -f && docker compose up -d ;;


mount)Â Â  sudo mount -a && echo "ğŸ§Ÿ Vault Refreshed." ;;


status)Â  ~/mercury/status.sh ;;


gui-on)Â  sudo systemctl set-default graphical.target && echo "âœ… GUI Restored. Reboot to see desktop." ;;


gui-off) sudo systemctl set-default multi-user.target && echo "ğŸ§Ÿ Beheaded. Reboot for Headless mode." ;;


*)Â Â Â Â Â Â  echo "Usage: m [gpu|up|ps|reset|mount|status|gui-on|gui-off]" ;;


esac


}


EOF


â€‹6. THE PURPOSEFUL BEHEADING


â€‹Disables GUI to save all RAM for the Media Stack


â€‹sudo systemctl set-default multi-user.target


â€‹echo "ğŸ§Ÿ The Zombie is now Headless. Rebooting in 5 seconds..."


sleep 5


sudo reboot


â€‹ğŸ“’ New Headless Cheat Sheet




â€‹m up: Wake the media empire.


â€‹m status: Check the vitals from your phone.


â€‹m mount: Use the "Internal Trick" to force-connect the Vault.


â€‹m gui-on: Bring the Desktop back to life (Emergency use only).


â€‹m gui-off: Return to the pure Headless state.




â€‹âš ï¸ The Vault Warning




â€‹Pleasant Reminder: Always run your mount-vault.sh after a clean install! If the Zombie wakes up before the Vault is mounted, Jellyfin will think your library has vanished. This "Internal Trick" ensures the heart of your server stays connected to its memories.
âš ï¸ Safety & Responsibility




â€‹Check the Code: Always inspect scripts before piping them into your terminal.


Power Stability: Because this is a headless server, an Uninterruptible Power Supply (UPS) is recommended to prevent data corruption during the "Internal Trick" mount.


User Risk: You acknowledge that you are modifying system boot targets and hardware persistence at your own risk. I am not responsible for system instability.






